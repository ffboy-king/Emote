<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Key Verification | BIG BULL CHEATS</title>
    <style>
        /* ==================== MAIN STYLES ==================== */
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif; }
        
        body { 
            background:#0a0a0a; 
            color:#fff; 
            min-height:100vh; 
            display:flex; 
            justify-content:center; 
            align-items:center; 
            padding:20px;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 215, 0, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 215, 0, 0.05) 0%, transparent 20%);
        }
        
        .container { 
            max-width:500px; 
            width:100%; 
            background:rgba(20,20,20,0.95); 
            border:2px solid #ffd700; 
            border-radius:20px; 
            padding:40px 30px; 
            text-align:center; 
            box-shadow:0 20px 50px rgba(0,0,0,0.5);
        }
        
        /* ==================== BLOCK PAGE STYLES ==================== */
        .block-container {
            border:2px solid #ff4444;
            box-shadow:0 20px 50px rgba(255,0,0,0.3);
        }
        
        .block-icon {
            font-size:5rem;
            color:#ff4444;
            margin-bottom:20px;
            animation:shake 0.5s ease-in-out infinite alternate;
        }
        
        @keyframes shake {
            0% { transform:translateX(-5px); }
            100% { transform:translateX(5px); }
        }
        
        .block-title {
            color:#ff4444;
            font-size:2.5rem;
            margin-bottom:15px;
            font-weight:900;
        }
        
        .block-message {
            color:#fff;
            font-size:1.2rem;
            margin-bottom:30px;
            line-height:1.6;
        }
        
        .link-box {
            background:#222;
            padding:20px;
            margin:30px auto;
            border-left:5px solid #ffd700;
            text-align:left;
            max-width:500px;
            border-radius:8px;
        }
        
        .redirect-btn {
            background:linear-gradient(to right, #007bff, #0056b3);
            color:white;
            padding:15px 30px;
            text-decoration:none;
            border-radius:50px;
            font-weight:bold;
            display:inline-block;
            margin:20px;
            font-size:1.1rem;
            border:none;
            cursor:pointer;
        }
        
        .countdown {
            font-size:2rem;
            color:#ffd700;
            margin:20px;
            font-family:monospace;
        }
        
        /* ==================== VERIFICATION PAGE STYLES ==================== */
        .logo { 
            font-size:2.5rem; 
            background:linear-gradient(135deg,#ffd700 0%,#ffed4e 100%); 
            -webkit-background-clip:text; 
            -webkit-text-fill-color:transparent; 
            font-weight:900; 
            margin-bottom:15px; 
            text-shadow:0 0 30px rgba(255,215,0,0.3);
        }
        
        .title { 
            color:#ffd700; 
            font-size:1.8rem; 
            margin-bottom:10px; 
            font-weight:700; 
        }
        
        .subtitle { 
            color:#aaa; 
            font-size:1rem; 
            margin-bottom:30px; 
        }
        
        .access-badge { 
            background:rgba(0,255,0,0.1); 
            border:1px solid #00ff00; 
            color:#00ff00; 
            padding:15px; 
            border-radius:10px; 
            margin-bottom:30px; 
            font-size:1rem;
        }
        
        .key-input { 
            width:100%; 
            padding:18px; 
            background:rgba(0,0,0,0.5); 
            border:2px solid #ffd700; 
            border-radius:12px; 
            color:white; 
            font-size:1.1rem; 
            text-align:center; 
            margin:25px 0;
            letter-spacing:2px;
            font-family:'Courier New',monospace;
        }
        
        .key-input:focus {
            outline:none;
            border-color:#ffed4e;
            box-shadow:0 0 15px rgba(255,215,0,0.3);
        }
        
        .verify-btn { 
            background:linear-gradient(135deg,#4CAF50 0%,#2E7D32 100%); 
            color:white; 
            border:none; 
            border-radius:50px; 
            padding:18px 35px; 
            font-size:1.2rem; 
            font-weight:900; 
            cursor:pointer; 
            width:100%; 
            margin-top:15px;
            box-shadow:0 10px 30px rgba(76,175,80,0.3);
            transition:all 0.3s ease;
            display:flex;
            align-items:center;
            justify-content:center;
            gap:15px;
        }
        
        .verify-btn:hover {
            transform:translateY(-3px);
            box-shadow:0 15px 40px rgba(76,175,80,0.5);
        }
        
        .verify-btn:disabled {
            background:#666;
            cursor:not-allowed;
            transform:none;
            box-shadow:none;
        }
        
        .info-box {
            background:rgba(0,0,0,0.3);
            border-radius:10px;
            padding:15px;
            margin:20px 0;
            border-left:4px solid #ffd700;
            text-align:left;
        }
        
        .info-title {
            color:#ffd700;
            font-size:1rem;
            margin-bottom:8px;
            display:flex;
            align-items:center;
            gap:10px;
        }
        
        .info-text {
            color:#aaa;
            font-size:0.9rem;
            line-height:1.5;
        }
        
        .footer {
            margin-top:30px;
            color:#777;
            font-size:0.85rem;
        }
        
        /* ==================== SUCCESS OVERLAY STYLES ==================== */
        .overlay {
            position:fixed;
            top:0;
            left:0;
            width:100%;
            height:100%;
            background:rgba(0,0,0,0.95);
            display:none;
            justify-content:center;
            align-items:center;
            z-index:1000;
        }
        
        .overlay.active {
            display:flex;
        }
        
        .overlay-content {
            max-width:350px;
            width:100%;
            background:rgba(20,20,20,0.95);
            border:2px solid #ffd700;
            border-radius:20px;
            padding:30px;
            text-align:center;
        }
        
        .overlay-icon {
            font-size:3rem;
            color:#ffd700;
            margin-bottom:20px;
            animation:pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%,100% { transform:scale(1); }
            50% { transform:scale(1.1); }
        }
        
        .overlay-countdown {
            font-size:2.5rem;
            font-weight:900;
            color:#ffd700;
            text-shadow:0 0 20px rgba(255,215,0,0.5);
            margin:20px 0;
        }
        
        /* ==================== RESPONSIVE ==================== */
        @media (max-width:480px) {
            .container { padding:30px 20px; }
            .logo { font-size:2rem; }
            .title { font-size:1.5rem; }
            .block-title { font-size:2rem; }
            .key-input, .verify-btn { font-size:1rem; padding:16px; }
            .verify-btn { padding:16px 30px; }
        }
    </style>
</head>
<body>
    <!-- SUCCESS OVERLAY -->
    <div class="overlay" id="successOverlay">
        <div class="overlay-content">
            <div class="overlay-icon">‚úì</div>
            <div class="title">KEY VERIFIED!</div>
            <div class="subtitle">
                Status updated: <strong>UNVERIFIED ‚Üí GENERATED</strong><br>
                Redirecting in <span class="overlay-countdown" id="overlayCountdown">5</span> seconds
            </div>
        </div>
    </div>

    <!-- MAIN CONTAINER (Will show either BLOCK or VERIFICATION page) -->
    <div class="container" id="mainContainer">
        <!-- Content will be filled by JavaScript -->
    </div>

    <script>
        // ==================== CONFIGURATION ====================
        const OFFICIAL_LINK = 'https://vplink.in/tCOFsE';
        const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxVqlxbN9I7CTYgyKVH25G5owxgO2-d3M5YtzXKoivSYQycOQtiYSkm6q9vzXa9PSStjg/exec';
        const FINAL_REDIRECT_URL = 'http://bigbullcheatsofficial.vercel.app';
        const SECRET_CODE = 'BBC123'; // Backup access code

        // ==================== SECURITY CHECK ====================
        function checkAccess() {
            const referrer = document.referrer;
            const urlParams = new URLSearchParams(window.location.search);
            const secretCode = urlParams.get('code');
            
            // 1. Check if coming from official vplink.in
            if (referrer && referrer.includes('vplink.in/tCOFsE')) {
                return { allowed: true, reason: 'vplink_referrer' };
            }
            
            // 2. Check secret code (backup access)
            if (secretCode === SECRET_CODE) {
                // Store in session for 1 hour
                sessionStorage.setItem('bbc_access', 'true');
                sessionStorage.setItem('access_time', Date.now());
                return { allowed: true, reason: 'secret_code' };
            }
            
            // 3. Check session storage (previously authenticated)
            const storedAccess = sessionStorage.getItem('bbc_access');
            const accessTime = sessionStorage.getItem('access_time');
            if (storedAccess === 'true' && accessTime) {
                // Check if within 1 hour
                const hourInMs = 60 * 60 * 1000;
                if (Date.now() - parseInt(accessTime) < hourInMs) {
                    return { allowed: true, reason: 'session' };
                }
            }
            
            // ACCESS DENIED
            return { allowed: false, reason: 'direct_access' };
        }

        // ==================== SHOW BLOCK PAGE ====================
        function showBlockPage() {
            const container = document.getElementById('mainContainer');
            container.classList.add('block-container');
            
            container.innerHTML = `
                <div class="block-icon">‚õî</div>
                <div class="block-title">ACCESS DENIED</div>
                <div class="block-message">
                    This verification page can <strong>ONLY</strong> be accessed via the official link.<br>
                    Direct access is completely blocked.
                </div>
                
                <div class="link-box">
                    <strong>‚úÖ Official Access Point:</strong><br><br>
                    <a href="${OFFICIAL_LINK}" style="color:#ffd700;font-size:1.2rem;">
                        ${OFFICIAL_LINK}
                    </a>
                </div>
                
                <button class="redirect-btn" onclick="window.location.href='${OFFICIAL_LINK}'">
                    üîó GO TO OFFICIAL LINK
                </button>
                
                <p>Auto-redirect in <span class="countdown" id="countdown">10</span> seconds</p>
                
                <div class="footer">
                    ¬© 2024 BIG BULL CHEATS ‚Ä¢ Restricted Access
                </div>
            `;
            
            // Auto-redirect countdown
            let count = 10;
            const countdownEl = document.getElementById('countdown');
            const interval = setInterval(() => {
                count--;
                countdownEl.textContent = count;
                if (count <= 0) {
                    clearInterval(interval);
                    window.location.href = OFFICIAL_LINK;
                }
            }, 1000);
            
            // Block dev tools
            blockDevTools();
        }

        // ==================== SHOW VERIFICATION PAGE ====================
        function showVerificationPage() {
            const container = document.getElementById('mainContainer');
            
            container.innerHTML = `
                <div class="access-badge">
                    ‚úÖ AUTHORIZED ACCESS GRANTED (via vplink.in/tCOFsE)
                </div>
                
                <div class="logo">BIG BULL CHEATS</div>
                <div class="title">KEY VERIFICATION</div>
                <div class="subtitle">Verify your key to activate it</div>
                
                <div class="info-box">
                    <div class="info-title">
                        <span style="font-size:1.2em;">‚ÑπÔ∏è</span> IMPORTANT
                    </div>
                    <div class="info-text">
                        ‚Ä¢ Enter key below to verify<br>
                        ‚Ä¢ Status updates: <strong>UNVERIFIED ‚Üí GENERATED</strong><br>
                        ‚Ä¢ After verification, redirect to main website<br>
                        ‚Ä¢ Only accessible via: ${OFFICIAL_LINK}
                    </div>
                </div>
                
                <input type="text" class="key-input" id="keyInput" 
                       placeholder="Enter your key (e.g., BBC ABC 123)" 
                       autocomplete="off">
                
                <div class="info-box" id="statusMessage" style="display:none; text-align:center;"></div>
                
                <button class="verify-btn" id="verifyBtn" onclick="verifyKey()">
                    <span>‚úì</span> VERIFY KEY
                </button>
                
                <div class="footer">
                    ¬© 2024 BIG BULL CHEATS ‚Ä¢ Secure Verification System
                </div>
            `;
            
            // Auto-focus input
            document.getElementById('keyInput').focus();
            
            // Enter key support
            document.getElementById('keyInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') verifyKey();
            });
        }

        // ==================== VERIFY KEY FUNCTION ====================
        async function verifyKey() {
            const keyInput = document.getElementById('keyInput');
            const verifyBtn = document.getElementById('verifyBtn');
            const statusMsg = document.getElementById('statusMessage');
            
            const key = keyInput.value.trim();
            if (!key) {
                showStatus('Please enter a key', 'error');
                return;
            }
            
            // Disable button and show loading
            verifyBtn.disabled = true;
            verifyBtn.innerHTML = '<span class="loading">‚è≥</span> VERIFYING...';
            showStatus('Connecting to verification server...', 'loading');
            
            try {
                // Call Google Apps Script
                const response = await fetch(
                    `${APPS_SCRIPT_URL}?action=markKeyAsGenerated&key=${encodeURIComponent(key)}&password=NEXT2026`
                );
                
                if (!response.ok) throw new Error(`Server error: ${response.status}`);
                
                const data = await response.json();
                
                if (data.success) {
                    showStatus('‚úÖ Key verified! Updating status...', 'success');
                    verifyBtn.innerHTML = '<span>‚úì</span> VERIFIED!';
                    
                    // Show success overlay
                    setTimeout(() => {
                        showSuccessOverlay();
                    }, 1000);
                    
                } else {
                    showStatus(`‚ùå ${data.error || 'Verification failed'}`, 'error');
                    verifyBtn.disabled = false;
                    verifyBtn.innerHTML = '<span>‚úì</span> VERIFY KEY';
                }
                
            } catch (error) {
                showStatus(`‚ùå Error: ${error.message}`, 'error');
                verifyBtn.disabled = false;
                verifyBtn.innerHTML = '<span>‚úì</span> VERIFY KEY';
            }
        }

        // ==================== HELPER FUNCTIONS ====================
        function showStatus(message, type) {
            const statusMsg = document.getElementById('statusMessage');
            statusMsg.textContent = message;
            statusMsg.style.display = 'block';
            statusMsg.style.background = type === 'error' ? 'rgba(255,68,68,0.1)' : 
                                        type === 'success' ? 'rgba(0,255,0,0.1)' : 
                                        'rgba(255,215,0,0.1)';
            statusMsg.style.border = type === 'error' ? '1px solid #ff4444' : 
                                    type === 'success' ? '1px solid #00ff00' : 
                                    '1px solid #ffd700';
            statusMsg.style.color = type === 'error' ? '#ff4444' : 
                                   type === 'success' ? '#00ff00' : 
                                   '#ffd700';
        }

        function showSuccessOverlay() {
            const overlay = document.getElementById('successOverlay');
            const countdownEl = document.getElementById('overlayCountdown');
            
            overlay.classList.add('active');
            
            let count = 5;
            const interval = setInterval(() => {
                count--;
                countdownEl.textContent = count;
                if (count <= 0) {
                    clearInterval(interval);
                    window.location.href = FINAL_REDIRECT_URL;
                }
            }, 1000);
        }

        function blockDevTools() {
            // Block right-click
            document.addEventListener('contextmenu', e => e.preventDefault());
            
            // Block F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
            document.addEventListener('keydown', e => {
                if (e.key === 'F12' || 
                    (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                    (e.ctrlKey && e.shiftKey && e.key === 'J') ||
                    (e.ctrlKey && e.key === 'U')) {
                    e.preventDefault();
                    alert('Developer tools disabled on this page');
                    return false;
                }
            });
        }

        // ==================== INITIALIZE ====================
        window.addEventListener('DOMContentLoaded', () => {
            const access = checkAccess();
            
            if (access.allowed) {
                showVerificationPage();
            } else {
                showBlockPage();
            }
            
            // Clean URL if has secret code
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('code')) {
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        });

        // ==================== LOADING SPINNER STYLE ====================
        const style = document.createElement('style');
        style.textContent = `
            .loading {
                display: inline-block;
                animation: spin 1s linear infinite;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>